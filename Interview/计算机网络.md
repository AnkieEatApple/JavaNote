## 计算机网络
1. 主要为计算机网络的知识点原理
2. 平时接触的基本都是封装好的网络协议，什么Http、MQTT、WebSocket、ftp之类的

### 一、OSI开放式互联参考模型
##### 1.1 模型的主体分层结构
1. <第一层>物理层：机械、电子、定时接口通信信道上的原始比特流传输
2. <第二层>数据链路层：物理寻址，同时将原始比特流转位逻辑传输线路。
3. <第三层>网络层：控制子网的运行，如逻辑编制、分组传输、路由选择。
4. <第四层>传输层：接收上一层的数据，在必要的时候把数据进行分割，并将这些数据交给网络层，且保证这些数据段有效到达对端。
5. <第五层>会话层：不同机器上的用户之间建立及管理会话。
6. <第六层>表示层：信息的语法语意以及它们的关联，如加密解密，延缓翻译，压缩解压缩等。
7. <第七层>应用层：各种应用程序协议，如HTTP、FTP、SMTP、POP3等
8. 协议图示<br/>![OSI网络模型.gif](https://i.loli.net/2019/07/24/5d3860c51889364450.gif)


##### 1.2 网络数据处理啊流程
1. 是从数据开始根据不同的层进行封装，然后在逐层解析
2. 封装的流程<br/>![WeChatc209f91ffe1c5fa2535b47f0a9780ed8.png](https://i.loli.net/2019/07/24/5d38632eb63bb34607.png)
3. OSI并不是一个使用标准，而是一个使用过程中的一个概念型框架
4. OSI的一种实现为："TCP/IP"协议

#### 1.3 TCP/IP协议
1. TCP/IP协议本来是指TCP协议和IP协议，然鹅现在一般类指使用IP进行通信时使用协议的协议群的统称，泛指一些应用层的协议群


### 二、TCP三次握手
1. IP协议的数据包是不可靠的，只是根据IP寻址路由寻找到指定的地址，但是包的顺序却不一定按顺序来的
2. 这个就需要上层协议来控制顺序

##### 2.1 传输控制协议TCP简介
1. 面向连接的、可靠的、基于字节流的传输层的通信协议。
2. 将应用层的数据流分割成报文段并发送给目标节点的TCP层。
3. 数据包都有序号，对方收到则发送ACK确认，未收到则重传。
4. 使用校验来检验数据在传输过程中是否有错误。
5. TCP报文头：
	1. **Port**: TCP报文头重不包含ip信息，但是包含自己的端口号和对方的端口号的信息，协议中的端口号可以标识主机中的唯一进程
	2. **Sequence Number**: 序列号字段，4个字节
	3. **Acknowledgment Number**: 确认号字段，4个字节
	4. TCP Flags: 
		* URG: 紧急指针标志，1表示紧急指针有效，0位忽略紧急指针
		* **ACK: 确认序号标志**，1表示确认号有效，0表示不含确认信息
		* PSH: push标志，1表示应快速将字段交给应用程序，而不是在缓冲区排队
		* RST: 重制连接标志，由于重置、主机崩溃出现错误的连接，或者用于拒绝非法的报文段和拒绝非法请求
		* SYN: 同步序号，用于建立连接过程，在连接过程中SYN=1和ACK=0表示该数据段没有使用捎带的确认域
		* FIN: finish标志，用于释放连接，关闭本方的数据流
	

##### 2.2 TCP三次握手
1. 握手时为了建立连接，握手之后，TCP将在两个机器之间建立一个全双工的通信，TCP三次握手的流程图如下：<br/>![三次握手.png](https://i.loli.net/2019/07/24/5d387152ae7d818757.png)

2. 建立连接的过程
	1. 假设A和B首次通信，两者都是close状态，其中client端是主动打开，B端的server端是被动打开，主动监听listen其他进程发送过来的连接请求
	2. client端主动发送`SYN=1，seq=x`的报文，并且client端进入一个**SYN_SENT**的同步已发送的状态，此报文不能携带数据，但是消耗掉一个序号。
	3. server端若同意连接，server这边发送出确认报文，`SYN=1, ACK=1, seq=y, ack=x+1`，ack=x+1表明的是发送过来的esp的值+1，此时服务端进入到了**SYN-RECV**
	4. 这里的seq + 1表示的是可以携带数据
















